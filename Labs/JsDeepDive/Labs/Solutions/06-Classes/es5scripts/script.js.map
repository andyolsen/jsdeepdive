{"version":3,"file":"script.js","names":["Util","n","Product","description","email","price","sales","ts","Date","str","toUpperCase","big","bold","fontcolor","tsStr","getDate","getMonth","getFullYear","pad","getHours","getMinutes","getSeconds","allProducts","document","addEventListener","getElementById","doAdd","sort","p1","p2","displayProducts","reverse","push","copyWithin","length","doSearch","doFindFirst","value","priceStr","parseFloat","toFixed","salesStr","parseInt","product","products","targetElement","entries","i","p","toString","console","log","innerHTML","searchString","re","RegExp","matchingProducts","forEach","test","matchingProduct","find","undefined","alert"],"sources":["Solutions/06-Classes/es6scripts/script.js"],"sourcesContent":["class Util {\r\n\tstatic pad(n) {\r\n\t\treturn (n < 10) ? (`0${n}`) : n;\r\n\t}\r\n} \r\n\r\nclass Product {\r\n\r\n    constructor(description, email, price, sales) {\r\n        this.description = description\r\n        this.email = email\r\n        this.price = price\r\n        this.sales = sales\r\n        this.ts = new Date()\r\n    }\r\n\r\n    toString() {\r\n\t\t// Build a formatted string containing everything except the timestamp.\r\n\t\tlet str = this.description.toUpperCase().big().bold().fontcolor('orange') + `<br/>\r\n\t\t\t\t\t\t\t\t\tSuggested by ${this.email}<br/>\r\n\t\t\t\t\t\t\t\t\tÂ£${this.price} [projected sales ${this.sales}]<br/>`\r\n\r\n\t\t// Append the current date/time to the  string.\r\n\t\tconst tsStr = `${this.ts.getDate()}/${this.ts.getMonth() + 1}/${this.ts.getFullYear()},    \r\n\t\t\t\t\t   ${Util.pad(this.ts.getHours())}:${Util.pad(this.ts.getMinutes())}:${Util.pad(this.ts.getSeconds())}`\r\n\t\t\r\n\t\t// Append the timestamp in blue.\r\n\t\tstr += tsStr.fontcolor(\"blue\")\r\n\t\t\r\n\t\treturn str\r\n    }\r\n}\r\n\r\nconst allProducts = [];\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\r\n    document.getElementById('add').addEventListener('click', doAdd);\r\n    \r\n    document.getElementById('sort').addEventListener('click', () => {\r\n\t\tallProducts.sort( (p1, p2) => {\r\n\t\t\tif (p1.description < p2.description)\r\n\t\t\t\treturn -1\r\n\t\t\telse if (p1.description > p2.description)\r\n\t\t\t\treturn +1\r\n\t\t\telse \r\n\t\t\t\treturn 0\r\n\t\t})\r\n        displayProducts(allProducts);\r\n    });\r\n    \r\n    document.getElementById('reverse').addEventListener('click', () => {\r\n\t\tallProducts.reverse();\r\n        displayProducts(allProducts);\r\n    });    \r\n    \r\n    document.getElementById('repeat').addEventListener('click', () => {\r\n\t\tallProducts.push('Dummy')\r\n\t\tallProducts.copyWithin(allProducts.length-1, allProducts.length-2) \r\n        displayProducts(allProducts);\r\n    });    \r\n\t\r\n    document.getElementById('search').addEventListener('click', doSearch);\r\n    document.getElementById('findFirst').addEventListener('click', doFindFirst);\r\n});\r\n\r\nfunction doAdd() {\r\n\r\n    // Get the product suggestion (text).\r\n    const description = document.getElementById('description').value;\r\n\r\n    // Get the user's email address (text).\r\n    const email = document.getElementById('email').value;\r\n\r\n    // Get the recommended price (float).\r\n    const priceStr = document.getElementById('price').value;\r\n    const price = parseFloat(priceStr).toFixed(2);\r\n\r\n    // Get the estimated sales/year (int).\r\n    const salesStr = document.getElementById('sales').value;\r\n    const sales = parseInt(salesStr);\r\n\r\n    // Create a new Product object with the data garnered from the form.\r\n    let product = new Product(description, email, price, sales);\r\n\r\n    // Add this Product object to the global array of all products.\r\n    allProducts.push(product);\r\n\r\n    // Redisplay all the products.\r\n    displayProducts(allProducts);\r\n}\r\n\r\nfunction displayProducts(products, targetElement='allProductsList') {\r\n\r\n    let str = '<ul>';\r\n    for (let [i,p] of products.entries()) {\r\n        str += `<li>${p.toString()}</li>`;\r\n\t\tconsole.log(`Displayed product at position ${i}, details: ${p.toString()}`)\r\n    }\r\n    str += '</ul>';\r\n\r\n    document.getElementById(targetElement).innerHTML = str;\r\n}\r\n\r\nfunction doSearch() {\r\n\r\n    // Create a RegExp object, based on the search string entered by the user.\r\n    const searchString = document.getElementById('searchString').value;\r\n    const re = new RegExp(searchString, 'i');\r\n\r\n    // Create an array that contains all the products that match the search string.\r\n    const matchingProducts = []\r\n    allProducts.forEach(p => {\r\n        if (re.test(p.description)) {\r\n            matchingProducts.push(p);\r\n        }\r\n    });\r\n\r\n    // Display the array of matching product suggestions.\r\n    displayProducts(matchingProducts, 'matchingProductsList');\r\n}\r\n\r\nfunction doFindFirst() {\r\n\r\n    // Create a RegExp object, based on the search string entered by the user.\r\n    const searchString = document.getElementById('searchString').value;\r\n    const re = new RegExp(searchString, 'i');\r\n\r\n    const matchingProduct = allProducts.find(p => re.test(p.description));\r\n\tif (matchingProduct !== undefined) {\r\n\t\tdisplayProducts([matchingProduct], 'matchingProductsList');\r\n\t} \r\n\telse {\r\n\t\tdisplayProducts([], 'matchingProductsList');\r\n\t\talert(`No product found matching ${searchString}`);\r\n\t}\r\n}"],"mappings":"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"}