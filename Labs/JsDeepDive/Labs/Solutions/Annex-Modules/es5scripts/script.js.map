{"version":3,"file":"script.js","names":["allProducts","Map","document","addEventListener","getElementById","doGet","doInsert","doUpdate","doDelete","doDisplayProductsForTag","id","getValue","product","get","setHtml","displayProductDetail","readProductDetail","set","displayProducts","values","displayTags","e","tagElements","currentTarget","getElementsByTagName","t","className","target","tagText","innerText","productsForTag","filter","p","hasTag"],"sources":["Solutions/Annex-Modules/es6scripts/script.js"],"sourcesContent":["import Product from './product.js';\r\nimport {readProductDetail, displayProductDetail, displayProducts, displayTags} from './userinterface.js';\r\nimport {getValue, setValue, setHtml, setHtmlAll} from './userinterface.js';\r\n \r\nlet allProducts = new Map();\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    \r\n\tdocument.getElementById('get').addEventListener('click', doGet);\r\n\tdocument.getElementById('insert').addEventListener('click', doInsert);\r\n\tdocument.getElementById('update').addEventListener('click', doUpdate);\r\n\tdocument.getElementById('delete').addEventListener('click', doDelete);\r\n\t\r\n\t// For the #taggedProductSuggestions element, handle the bubbled 'click' event from any descendent elements.\r\n\tdocument.getElementById('taggedProductSuggestions').addEventListener('click', doDisplayProductsForTag, false);\r\n});\r\n\r\nfunction doGet() {\r\n\r\n    const id = getValue('#id');\r\n\r\n    const product = allProducts.get(id);\r\n    if (!product) {\r\n        setHtml('#messageArea', `Product ${id} not found`, 'error');\r\n    }\r\n    else {\r\n        setHtml('#messageArea', `Product ${id} found successfully`, 'valid');\r\n    }\r\n    displayProductDetail(product);\r\n}\r\n\r\nfunction doInsert() {\r\n\r\n    const product = readProductDetail();\r\n    allProducts.set(product.id, product);\r\n\r\n\tsetHtml('#messageArea', `Product inserted successfully, id ${product.id}`, 'valid');\r\n    displayProductDetail(product);\r\n\r\n    displayProducts(allProducts.values());\r\n    displayTags(allProducts.values());\r\n}\r\n\r\nfunction doUpdate() {\r\n\r\n    const id = getValue('#id');\r\n\r\n    let product = allProducts.get(id);\r\n    if (!product) {\r\n        setHtml('#messageArea', `Product ${id} not found`, 'error');\r\n    }\r\n    else {\r\n        product = readProductDetail(id);\r\n        allProducts.set(id, product);\r\n\r\n        setHtml('#messageArea', `Product updated successfully, id ${product.id}`, 'valid');\r\n        displayProductDetail(product);\r\n        displayProducts(allProducts.values());\r\n        displayTags(allProducts.values());\r\n    }\r\n}\r\n\r\nfunction doDelete() {\r\n\r\n    const id = getValue('#id');\r\n\r\n    const product = allProducts.get(id);\r\n    if (!product) {\r\n        setHtml('#messageArea', `Product ${id} not found`, 'error');\r\n    }\r\n    else {\r\n        allProducts.delete(id);\r\n\r\n        setHtml('#messageArea', `Product deleted successfully, id ${product.id}`, 'valid');\r\n        displayProducts(allProducts.values());\r\n        displayTags(allProducts.values());\r\n    }\r\n    displayProductDetail(product);\r\n}\r\n\r\nfunction doDisplayProductsForTag(e) {\r\n\r\n\t// The user clicked a tag inside the #taggedProductSuggestions element.\r\n\t// The #taggedProductSuggestions element itself is designated by e.currentTarget.\r\n\t// Get all the tags (i.e. <a> elements) inside the #taggedProductSuggestions element.\r\n\tconst tagElements = e.currentTarget.getElementsByTagName('a');\r\n\t\r\n\t// Highlight the tag the user actually clicked on.\r\n\tfor (let t of tagElements) {\r\n\t\tt.className = (t == e.target) ? 'tagSelected' : '';\r\n\t}\r\n\t\r\n\t// Display products that have this tag.\r\n    const tagText = e.target.innerText;    \r\n    const productsForTag = [...allProducts.values()].filter(p => p.hasTag(tagText));\r\n    displayProducts(productsForTag, '#taggedProductsList');\r\n}\r\n"],"mappings":";;AAAA;;AACA;;;;;;;;;;;;;;;;;;AAGA,IAAIA,WAAW,GAAG,IAAIC,GAAJ,EAAlB;AAEAC,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;EAEnDD,QAAQ,CAACE,cAAT,CAAwB,KAAxB,EAA+BD,gBAA/B,CAAgD,OAAhD,EAAyDE,KAAzD;EACAH,QAAQ,CAACE,cAAT,CAAwB,QAAxB,EAAkCD,gBAAlC,CAAmD,OAAnD,EAA4DG,QAA5D;EACAJ,QAAQ,CAACE,cAAT,CAAwB,QAAxB,EAAkCD,gBAAlC,CAAmD,OAAnD,EAA4DI,QAA5D;EACAL,QAAQ,CAACE,cAAT,CAAwB,QAAxB,EAAkCD,gBAAlC,CAAmD,OAAnD,EAA4DK,QAA5D,EALmD,CAOnD;;EACAN,QAAQ,CAACE,cAAT,CAAwB,0BAAxB,EAAoDD,gBAApD,CAAqE,OAArE,EAA8EM,uBAA9E,EAAuG,KAAvG;AACA,CATD;;AAWA,SAASJ,KAAT,GAAiB;EAEb,IAAMK,EAAE,GAAG,IAAAC,uBAAA,EAAS,KAAT,CAAX;EAEA,IAAMC,OAAO,GAAGZ,WAAW,CAACa,GAAZ,CAAgBH,EAAhB,CAAhB;;EACA,IAAI,CAACE,OAAL,EAAc;IACV,IAAAE,sBAAA,EAAQ,cAAR,oBAAmCJ,EAAnC,iBAAmD,OAAnD;EACH,CAFD,MAGK;IACD,IAAAI,sBAAA,EAAQ,cAAR,oBAAmCJ,EAAnC,0BAA4D,OAA5D;EACH;;EACD,IAAAK,mCAAA,EAAqBH,OAArB;AACH;;AAED,SAASN,QAAT,GAAoB;EAEhB,IAAMM,OAAO,GAAG,IAAAI,gCAAA,GAAhB;EACAhB,WAAW,CAACiB,GAAZ,CAAgBL,OAAO,CAACF,EAAxB,EAA4BE,OAA5B;EAEH,IAAAE,sBAAA,EAAQ,cAAR,8CAA6DF,OAAO,CAACF,EAArE,GAA2E,OAA3E;EACG,IAAAK,mCAAA,EAAqBH,OAArB;EAEA,IAAAM,8BAAA,EAAgBlB,WAAW,CAACmB,MAAZ,EAAhB;EACA,IAAAC,0BAAA,EAAYpB,WAAW,CAACmB,MAAZ,EAAZ;AACH;;AAED,SAASZ,QAAT,GAAoB;EAEhB,IAAMG,EAAE,GAAG,IAAAC,uBAAA,EAAS,KAAT,CAAX;EAEA,IAAIC,OAAO,GAAGZ,WAAW,CAACa,GAAZ,CAAgBH,EAAhB,CAAd;;EACA,IAAI,CAACE,OAAL,EAAc;IACV,IAAAE,sBAAA,EAAQ,cAAR,oBAAmCJ,EAAnC,iBAAmD,OAAnD;EACH,CAFD,MAGK;IACDE,OAAO,GAAG,IAAAI,gCAAA,EAAkBN,EAAlB,CAAV;IACAV,WAAW,CAACiB,GAAZ,CAAgBP,EAAhB,EAAoBE,OAApB;IAEA,IAAAE,sBAAA,EAAQ,cAAR,6CAA4DF,OAAO,CAACF,EAApE,GAA0E,OAA1E;IACA,IAAAK,mCAAA,EAAqBH,OAArB;IACA,IAAAM,8BAAA,EAAgBlB,WAAW,CAACmB,MAAZ,EAAhB;IACA,IAAAC,0BAAA,EAAYpB,WAAW,CAACmB,MAAZ,EAAZ;EACH;AACJ;;AAED,SAASX,QAAT,GAAoB;EAEhB,IAAME,EAAE,GAAG,IAAAC,uBAAA,EAAS,KAAT,CAAX;EAEA,IAAMC,OAAO,GAAGZ,WAAW,CAACa,GAAZ,CAAgBH,EAAhB,CAAhB;;EACA,IAAI,CAACE,OAAL,EAAc;IACV,IAAAE,sBAAA,EAAQ,cAAR,oBAAmCJ,EAAnC,iBAAmD,OAAnD;EACH,CAFD,MAGK;IACDV,WAAW,UAAX,CAAmBU,EAAnB;IAEA,IAAAI,sBAAA,EAAQ,cAAR,6CAA4DF,OAAO,CAACF,EAApE,GAA0E,OAA1E;IACA,IAAAQ,8BAAA,EAAgBlB,WAAW,CAACmB,MAAZ,EAAhB;IACA,IAAAC,0BAAA,EAAYpB,WAAW,CAACmB,MAAZ,EAAZ;EACH;;EACD,IAAAJ,mCAAA,EAAqBH,OAArB;AACH;;AAED,SAASH,uBAAT,CAAiCY,CAAjC,EAAoC;EAEnC;EACA;EACA;EACA,IAAMC,WAAW,GAAGD,CAAC,CAACE,aAAF,CAAgBC,oBAAhB,CAAqC,GAArC,CAApB,CALmC,CAOnC;;EAPmC,2CAQrBF,WARqB;EAAA;;EAAA;IAQnC,oDAA2B;MAAA,IAAlBG,CAAkB;MAC1BA,CAAC,CAACC,SAAF,GAAeD,CAAC,IAAIJ,CAAC,CAACM,MAAR,GAAkB,aAAlB,GAAkC,EAAhD;IACA,CAVkC,CAYnC;;EAZmC;IAAA;EAAA;IAAA;EAAA;;EAahC,IAAMC,OAAO,GAAGP,CAAC,CAACM,MAAF,CAASE,SAAzB;;EACA,IAAMC,cAAc,GAAG,mBAAI9B,WAAW,CAACmB,MAAZ,EAAJ,EAA0BY,MAA1B,CAAiC,UAAAC,CAAC;IAAA,OAAIA,CAAC,CAACC,MAAF,CAASL,OAAT,CAAJ;EAAA,CAAlC,CAAvB;;EACA,IAAAV,8BAAA,EAAgBY,cAAhB,EAAgC,qBAAhC;AACH"}