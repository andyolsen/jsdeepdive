{"version":3,"file":"script.js","names":["document","addEventListener","getElementById","doSubmit","setHtmlAll","processAmount","processName","processCardNumber","processExpiryDate","processCvv","amountStr","getValue","amount","Number","parseFloat","isNaN","setHtml","amountPennies","Math","trunc","name","length","cardNumber","replace","matches","match","startsWith","expiryDate","month","parseInt","year","cvv","search","selector","element","querySelector","value","html","innerHTML","elements","querySelectorAll","forEach","e"],"sources":["Solutions/03-APIs/es6scripts/script.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n    document.getElementById('submit').addEventListener('click', doSubmit)\r\n})\r\n\r\nfunction doSubmit() {\r\n\r\n    setHtmlAll('.error', '')\r\n    setHtmlAll('.valid', '')\r\n\r\n    processAmount()\r\n    processName()\r\n    processCardNumber()\r\n    processExpiryDate()\r\n    processCvv()\r\n}\r\n\r\nfunction processAmount() {\r\n\r\n    const amountStr = getValue('#amount')\r\n    const amount = Number.parseFloat(amountStr) \r\n\r\n    if (Number.isNaN(amount)) {\r\n        setHtml('#amountError', 'Number required')\r\n        return\r\n    }\r\n    const amountPennies = Math.trunc(amount * 100)\r\n    setHtml('#amountValid', `Amount in pennies is ${amountPennies}`)\r\n}\r\n\r\nfunction processName() {\r\n\r\n    const name = getValue('#name')\r\n\r\n    if (name.length == 0) {\r\n        setHtml('#nameError', 'Name required')\r\n        return\r\n    }\r\n    setHtml('#nameValid', name)\r\n}\r\n\r\nfunction processCardNumber() {\r\n\r\n    let cardNumber = getValue('#cardNumber')\r\n    cardNumber = cardNumber.replace(/-|\\s|\\./g, '')\r\n\r\n    if (cardNumber.length != 16) {\r\n        setHtml('#cardNumberError', 'Must be 16 digits')\r\n        return\r\n    }\r\n\r\n    const matches = cardNumber.match(/\\d{4}/g)\r\n    if (matches == null || matches.length != 4) {\r\n        setHtml('#cardNumberError', 'Must be 16 digits')\r\n        return\r\n    }\r\n\r\n    if (!cardNumber.startsWith('4') && !cardNumber.startsWith('5')) {\r\n        setHtml('#cardNumberError', 'Must start with 4 or 5')\r\n        return\r\n    }\r\n\r\n    setHtml('#cardNumberValid', `${matches[0]}-${matches[1]}-${matches[2]}-${matches[3]}`)\r\n}\r\n\r\nfunction processExpiryDate() {\r\n\r\n    const expiryDate = getValue('#expiryDate')\r\n\r\n    if (expiryDate.length != 4) {\r\n        setHtml('#expiryDateError', 'Must be 4 digits')\r\n        return\r\n    }\r\n\r\n    const matches = expiryDate.match(/\\d{2}/g)\r\n    if (matches == null || matches.length != 2) {\r\n        setHtml('#expiryDateError', 'Must be mmyy format')\r\n        return\r\n    }\r\n\r\n    const month = Number.parseInt(matches[0])\r\n    const year = Number.parseInt(matches[1])\r\n    if (month < 1 || month > 12) {\r\n        setHtml('#expiryDateError', 'Invalid month')\r\n        return\r\n    }\r\n\r\n    if (year < 18 || year > 23) {\r\n        setHtml('#expiryDateError', 'Invalid year')\r\n        return\r\n    }\r\n\r\n    setHtml('#expiryDateValid', `Month ${month}, year ${year}`)\r\n}\r\n\r\nfunction processCvv() {\r\n\r\n    const cvv = getValue('#cvv')\r\n        \r\n    if (cvv.search(/^\\d{3}$/) == -1) {\r\n        setHtml('#cvvError', 'Must be 3 digits')\r\n        return\r\n    }\r\n    setHtml('#cvvValid', cvv)\r\n}\r\n\r\n/* Helper functions */\r\nfunction getValue(selector) {\r\n\tconst element = document.querySelector(selector)\r\n\treturn element ? element.value : ''\r\n}\r\n\r\nfunction setHtml(selector, html) {\r\n\tconst element = document.querySelector(selector)\r\n\tif (element) {\r\n\t\telement.innerHTML = html\r\n\t}\r\n}\r\n\r\nfunction setHtmlAll(selector, html) {\r\n\tconst elements = document.querySelectorAll(selector)\r\n\telements.forEach(e => e.innerHTML = html)\r\n}\r\n"],"mappings":"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"}